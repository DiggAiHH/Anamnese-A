<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anamnese Test-Demo - Funktionierend</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f7fa; }
        .test-banner { background: linear-gradient(135deg, #ff9800 0%, #ff6b00 100%); color: white; padding: 15px; text-align: center; font-weight: bold; }
        header { background: #667eea; color: white; padding: 20px; text-align: center; }
        .container { max-width: 800px; margin: 30px auto; padding: 20px; }
        .card { background: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .progress-bar { background: #e0e0e0; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 30px; }
        .progress-fill { background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); height: 100%; transition: width 0.3s; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        .question { margin-bottom: 25px; }
        .question label { display: block; font-weight: 600; margin-bottom: 10px; color: #333; }
        .question input[type="text"], .question input[type="date"], .question select, .question textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 16px; transition: border-color 0.3s; }
        .question input:focus, .question select:focus, .question textarea:focus { outline: none; border-color: #667eea; }
        .radio-group { display: flex; gap: 15px; }
        .radio-group label { font-weight: normal; display: flex; align-items: center; gap: 8px; }
        .btn-group { display: flex; gap: 15px; margin-top: 30px; }
        .btn { padding: 12px 30px; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #667eea; color: white; flex: 1; }
        .btn-primary:hover { background: #5568d3; transform: translateY(-2px); }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }
        .summary { background: #f8f9fa; padding: 20px; border-radius: 6px; margin-top: 20px; }
        .summary h3 { color: #667eea; margin-bottom: 15px; }
        .summary-item { padding: 10px; border-bottom: 1px solid #dee2e6; }
        .summary-item:last-child { border-bottom: none; }
        .summary-item strong { color: #495057; }
        .hidden { display: none; }
        .success-icon { font-size: 48px; text-align: center; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="test-banner">
        üß™ TEST-MODUS AKTIV - Demo-Version zum Testen des Flows
    </div>
    
    <header>
        <h1>üè• Medizinischer Anamnesebogen</h1>
        <p>Digitale Gesundheitserfassung - Test-Demo</p>
    </header>
    
    <div class="container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 33%;">Schritt 1 von 3 (33%)</div>
        </div>
        
        <div class="card" id="step1">
            <h2>üìã Pers√∂nliche Daten</h2>
            <div class="question">
                <label for="name">Vorname und Nachname *</label>
                <input type="text" id="name" placeholder="z.B. Max Mustermann" required>
            </div>
            <div class="question">
                <label for="birthdate">Geburtsdatum *</label>
                <input type="date" id="birthdate" required>
            </div>
            <div class="question">
                <label>Geschlecht *</label>
                <div class="radio-group">
                    <label><input type="radio" name="gender" value="male" required> M√§nnlich</label>
                    <label><input type="radio" name="gender" value="female"> Weiblich</label>
                    <label><input type="radio" name="gender" value="other"> Divers</label>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="nextStep(2)">Weiter ‚Üí</button>
            </div>
        </div>
        
        <div class="card hidden" id="step2">
            <h2>üè• Gesundheitsfragen</h2>
            <div class="question">
                <label for="complaints">Aktuelle Beschwerden</label>
                <textarea id="complaints" rows="4" placeholder="Beschreiben Sie Ihre aktuellen Beschwerden..."></textarea>
            </div>
            <div class="question">
                <label>Rauchen Sie? *</label>
                <div class="radio-group">
                    <label><input type="radio" name="smoking" value="yes" required> Ja</label>
                    <label><input type="radio" name="smoking" value="no"> Nein</label>
                    <label><input type="radio" name="smoking" value="former"> Fr√ºher</label>
                </div>
            </div>
            <div class="question">
                <label for="medications">Aktuelle Medikamente</label>
                <textarea id="medications" rows="3" placeholder="Liste Ihrer aktuellen Medikamente..."></textarea>
            </div>
            <div class="question">
                <label>Allergien bekannt? *</label>
                <div class="radio-group">
                    <label><input type="radio" name="allergies" value="yes" required> Ja</label>
                    <label><input type="radio" name="allergies" value="no"> Nein</label>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep(1)">‚Üê Zur√ºck</button>
                <button class="btn btn-primary" onclick="nextStep(3)">Weiter ‚Üí</button>
            </div>
        </div>
        
        <div class="card hidden" id="step3">
            <h2>‚úÖ Zusammenfassung</h2>
            <div class="summary" id="summary">
                <!-- Will be filled by JavaScript -->
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="prevStep(2)">‚Üê Zur√ºck</button>
                <button class="btn btn-primary" onclick="submitForm()">Absenden ‚úì</button>
            </div>
        </div>
        
        <div class="card hidden" id="success">
            <div class="success-icon">‚úÖ</div>
            <h2 style="text-align: center; color: #28a745;">Erfolgreich √ºbermittelt!</h2>
            <p style="text-align: center; margin-top: 15px;">Ihre Anamnese wurde erfasst. In der echten Anwendung w√ºrden die Daten jetzt verschl√ºsselt gespeichert.</p>
            <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 6px; margin-top: 20px;">
                <strong>Test-Modus Features:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>‚úÖ Privacy-Dialog automatisch √ºbersprungen</li>
                    <li>‚úÖ Formular-Flow funktioniert</li>
                    <li>‚úÖ Validierung aktiv</li>
                    <li>‚úÖ Fortschrittsanzeige</li>
                    <li>‚úÖ Zusammenfassung vor Absenden</li>
                </ul>
            </div>
            <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 20px; width: 100%;">Neu starten</button>
        </div>
    </div>
    
    <script>
        let currentStep = 1;
        const data = {};
        
        function nextStep(step) {
            // Validate current step
            if (currentStep === 1) {
                const name = document.getElementById('name').value;
                const birthdate = document.getElementById('birthdate').value;
                const gender = document.querySelector('input[name="gender"]:checked');
                
                if (!name || !birthdate || !gender) {
                    alert('Bitte f√ºllen Sie alle Pflichtfelder aus!');
                    return;
                }
                
                data.name = name;
                data.birthdate = birthdate;
                data.gender = gender.value;
            }
            
            if (currentStep === 2) {
                const smoking = document.querySelector('input[name="smoking"]:checked');
                const allergies = document.querySelector('input[name="allergies"]:checked');
                
                if (!smoking || !allergies) {
                    alert('Bitte beantworten Sie alle Pflichtfragen!');
                    return;
                }
                
                data.complaints = document.getElementById('complaints').value || 'Keine Angabe';
                data.smoking = smoking.value;
                data.medications = document.getElementById('medications').value || 'Keine Angabe';
                data.allergies = allergies.value;
                
                // Show summary
                showSummary();
            }
            
            // Hide all steps
            document.querySelectorAll('.card').forEach(card => card.classList.add('hidden'));
            
            // Show target step
            document.getElementById('step' + step).classList.remove('hidden');
            
            // Update progress
            currentStep = step;
            updateProgress();
        }
        
        function prevStep(step) {
            document.querySelectorAll('.card').forEach(card => card.classList.add('hidden'));
            document.getElementById('step' + step).classList.remove('hidden');
            currentStep = step;
            updateProgress();
        }
        
        function updateProgress() {
            const percent = Math.round((currentStep / 3) * 100);
            const progress = document.getElementById('progress');
            progress.style.width = percent + '%';
            progress.textContent = `Schritt ${currentStep} von 3 (${percent}%)`;
        }
        
        function showSummary() {
            const summary = document.getElementById('summary');
            const smokingText = {
                'yes': 'Ja',
                'no': 'Nein',
                'former': 'Fr√ºher'
            };
            const allergiesText = {
                'yes': 'Ja',
                'no': 'Nein'
            };
            const genderText = {
                'male': 'M√§nnlich',
                'female': 'Weiblich',
                'other': 'Divers'
            };
            
            summary.innerHTML = `
                <h3>Ihre Angaben:</h3>
                <div class="summary-item"><strong>Name:</strong> ${data.name}</div>
                <div class="summary-item"><strong>Geburtsdatum:</strong> ${data.birthdate}</div>
                <div class="summary-item"><strong>Geschlecht:</strong> ${genderText[data.gender]}</div>
                <div class="summary-item"><strong>Aktuelle Beschwerden:</strong> ${data.complaints}</div>
                <div class="summary-item"><strong>Rauchen:</strong> ${smokingText[data.smoking]}</div>
                <div class="summary-item"><strong>Medikamente:</strong> ${data.medications}</div>
                <div class="summary-item"><strong>Allergien:</strong> ${allergiesText[data.allergies]}</div>
            `;
        }
        
        function submitForm() {
            console.log('Form submitted:', data);
            document.querySelectorAll('.card').forEach(card => card.classList.add('hidden'));
            document.getElementById('success').classList.remove('hidden');
            document.getElementById('progress').style.width = '100%';
            document.getElementById('progress').textContent = 'Abgeschlossen (100%)';
        }
        
        // Initialize
        updateProgress();
    </script>
</body>
</html>
